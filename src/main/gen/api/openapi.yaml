openapi: 3.0.3
info:
  description: API REST pour gérer des posters de films (CRUD MongoDB).
  title: API Posters
  version: 1.0.0
servers:
- description: Serveur local
  url: http://localhost:8080
security:
- bearerAuth: []
tags:
- description: Opérations sur les posters
  name: posters
paths:
  /api/posters:
    get:
      operationId: getAllPosters
      responses:
        "200":
          content:
            application/json:
              schema:
                items:
                  $ref: '#/components/schemas/Poster'
                type: array
          description: Liste recuperée avec succes
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Erreur serveur
      summary: Liste tous les posters
      tags:
      - posters
      x-accepts:
      - application/json
    post:
      operationId: createPoster
      requestBody:
        content:
          application/json:
            example:
              id: tt9999999
              url: https://example.com/poster.jpg
              titre: Mon Film
            schema:
              $ref: '#/components/schemas/Poster'
        required: true
      responses:
        "201":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Poster'
          description: Poster créé avec succès
        "400":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Données invalides (champs manquants)
        "409":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Un poster avec cet id existe déjà
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Erreur serveur
      summary: Crée un nouveau poster
      tags:
      - posters
      x-content-type: application/json
      x-accepts:
      - application/json
  /api/posters/{id}:
    delete:
      operationId: deletePoster
      parameters:
      - description: Identifiant du poster (ex. tt0050083)
        example: tt0050083
        explode: false
        in: path
        name: id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "204":
          description: Poster supprimé avec succès
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Poster introuvable
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Erreur serveur
      summary: Supprime un poster
      tags:
      - posters
      x-accepts:
      - application/json
    get:
      operationId: getPosterById
      parameters:
      - description: Identifiant du poster (ex. tt0050083)
        example: tt0050083
        explode: false
        in: path
        name: id
        required: true
        schema:
          type: string
        style: simple
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Poster'
          description: Poster récupéré avec succès
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Poster introuvable
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Erreur serveur
      summary: Récupère un poster par son id
      tags:
      - posters
      x-accepts:
      - application/json
    put:
      operationId: updatePoster
      parameters:
      - description: Identifiant du poster (ex. tt0050083)
        example: tt0050083
        explode: false
        in: path
        name: id
        required: true
        schema:
          type: string
        style: simple
      requestBody:
        content:
          application/json:
            example:
              url: https://example.com/nouveau.jpg
              titre: Nouveau Titre
            schema:
              $ref: '#/components/schemas/PosterPatch'
        required: true
      responses:
        "200":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Poster'
          description: Poster mis à jour avec succès
        "404":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Poster introuvable
        "500":
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ErrorResponse'
          description: Erreur serveur
      summary: Modifie un poster existant
      tags:
      - posters
      x-content-type: application/json
      x-accepts:
      - application/json
components:
  schemas:
    Poster:
      description: Représentation d'un poster de film
      example:
        titre: 12 Angry Men
        id: tt0050083
        url: https://example.com/poster.jpg
      properties:
        id:
          description: Identifiant unique du poster (IMDb id)
          example: tt0050083
          type: string
        url:
          description: URL de l'image du poster
          example: https://example.com/poster.jpg
          type: string
        titre:
          description: Titre du film
          example: 12 Angry Men
          type: string
      required:
      - id
      - titre
      - url
      type: object
    PosterPatch:
      description: Champs modifiables d'un poster
      example:
        titre: Nouveau Titre
        url: https://example.com/nouveau.jpg
      properties:
        url:
          description: Nouvelle URL de l'image
          example: https://example.com/nouveau.jpg
          type: string
        titre:
          description: Nouveau titre
          example: Nouveau Titre
          type: string
      type: object
    ErrorResponse:
      description: Réponse d'erreur
      example:
        message: Poster introuvable
        status: 404
      properties:
        status:
          description: Code HTTP de l'erreur
          example: 404
          type: integer
        message:
          description: Message d'erreur
          example: Poster introuvable
          type: string
      required:
      - message
      - status
      type: object
  securitySchemes:
    bearerAuth:
      bearerFormat: JWT
      scheme: bearer
      type: http

